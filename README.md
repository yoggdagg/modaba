<div align="center">
  <img src="app_logo.png" alt="ëª¨ë‹¤ë°” ë¡œê³ " width="200"/>

  # ëª¨ë‹¤ë°” (MODABA)

  ### ëª¨ì—¬ì„œ ë‹¤ê°™ì´ ë°”ê¹¥ìœ¼ë¡œ!

  **SSAFY 12ê¸° ê³µí†µ í”„ë¡œì íŠ¸ | C204íŒ€**

  <br/>

  ![Java](https://img.shields.io/badge/Java-21-007396?style=flat-square&logo=openjdk&logoColor=white)
  ![Spring Boot](https://img.shields.io/badge/Spring_Boot-4.0.1-6DB33F?style=flat-square&logo=springboot&logoColor=white)
  ![Android](https://img.shields.io/badge/Android-Kotlin-3DDC84?style=flat-square&logo=android&logoColor=white)
  ![PostgreSQL](https://img.shields.io/badge/PostgreSQL%2BPostGIS-17-4169E1?style=flat-square&logo=postgresql&logoColor=white)
  ![Redis](https://img.shields.io/badge/Redis-7-DC382D?style=flat-square&logo=redis&logoColor=white)
  ![Docker](https://img.shields.io/badge/Docker-Compose-2496ED?style=flat-square&logo=docker&logoColor=white)
  ![Jenkins](https://img.shields.io/badge/Jenkins-CI%2FCD-D24939?style=flat-square&logo=jenkins&logoColor=white)
  ![CloudFlare](https://img.shields.io/badge/Cloudflare-DNS%2FSSL-F38020?style=flat-square&logo=cloudflare&logoColor=white)
</div>

---

## ğŸ“– í”„ë¡œì íŠ¸ ì†Œê°œ

**ëª¨ë‹¤ë°”**ëŠ” ì¹œêµ¬ë“¤ê³¼ í•¨ê»˜ ë°–ìœ¼ë¡œ ë‚˜ê°€ ì¦ê¸¸ ìˆ˜ ìˆëŠ” **ìœ„ì¹˜ ê¸°ë°˜ ëª¨ë°”ì¼ ê²Œì„ í”Œë«í¼**ì…ë‹ˆë‹¤.  
ì‹¤ì‹œê°„ GPS ì¶”ì ê³¼ ì¹´ì¹´ì˜¤ë§µì„ í™œìš©í•˜ì—¬ **ê²½ë„**, **ì•½ì†**, **ì§‘ì¤‘** ì„¸ ê°€ì§€ ëª¨ë“œë¥¼ ì œê³µí•˜ë©°,  
MMR ê¸°ë°˜ ë­í‚¹ ì‹œìŠ¤í…œê³¼ ì†Œì…œ ê¸°ëŠ¥ìœ¼ë¡œ ê²½ìŸê³¼ í˜‘ë ¥ì˜ ì¬ë¯¸ë¥¼ ë”í–ˆìŠµë‹ˆë‹¤.

---

## ğŸ® ì£¼ìš” ê¸°ëŠ¥

### ğŸš” ê²½ë„ (Kyungdo) â€” ì‹¤ì‹œê°„ ê²½ì°° vs ë„ë‘‘

- ì‹¤ì œ ì§€ë„ ìœ„ì—ì„œ íŒ€ì„ ë‚˜ëˆ  ì§„í–‰í•˜ëŠ” ìœ„ì¹˜ ê¸°ë°˜ ê²½ì°°-ë„ë‘‘ ê²Œì„
- PostGIS ê³µê°„ ì¿¼ë¦¬ë¥¼ í™œìš©í•œ ê²Œì„ êµ¬ì—­(ê²½ê³„/ê°ì˜¥) ì„¤ì •
- ì‹¤ì‹œê°„ ìœ„ì¹˜ ê³µìœ , ì²´í¬(ARREST) / íƒˆì¶œ(ESCAPE) / íƒœê·¸(TAG) ì•¡ì…˜ ì²˜ë¦¬
- MMR ê¸°ë°˜ ë§¤ì¹˜ë©”ì´í‚¹ ë° ë­í‚¹ ì‹œìŠ¤í…œ

### ğŸ“ ì•½ì† (Appointment) â€” ë§Œë‚¨ì˜ ê²½ìŸ

- ëª©í‘œ ì§€ì ê³¼ ì•½ì† ì‹œê°„ì„ ì„¤ì •í•˜ê³  ì°¸ì—¬ìë“¤ì´ ë¨¼ì € ë„ì°©í•˜ëŠ” ê²½ìŸ
- ì´ë™ ê¶¤ì , ì´ ì´ë™ ê±°ë¦¬, í‰ê· /ìµœê³  ì†ë„ ë“± í™œë™ ë°ì´í„° ê¸°ë¡
- ì‹¤ì‹œê°„ ë„ì°© ìˆœìœ„ í™•ì¸

### ğŸ“š ì§‘ì¤‘ (Focus) â€” í•¨ê»˜í•˜ëŠ” ì§‘ì¤‘ ì„¸ì…˜

- ê·¸ë£¹ ì§‘ì¤‘ë ¥ ì ìˆ˜ ì¸¡ì • ë° í‰ê·  ì ìˆ˜ ì‚°ì¶œ
- AI ê¸°ë°˜ ì§‘ì¤‘ë„ ë¶„ì„ ë¦¬í¬íŠ¸ ìë™ ìƒì„± ë° í•œ ì¤„ ìš”ì•½ ì œê³µ
- ì„¸ì…˜ë³„ í•™ìŠµ ê¸°ë¡ ê´€ë¦¬

### ğŸ‘¥ ì†Œì…œ ê¸°ëŠ¥

- ì¹´ì¹´ì˜¤ / ë„¤ì´ë²„ ì†Œì…œ ë¡œê·¸ì¸ (Local ê³„ì • ì§€ì›)
- ì¹œêµ¬ ìš”ì²­ / ìˆ˜ë½ / ê±°ì ˆ ì‹œìŠ¤í…œ
- ìºë¦­í„° & ë°°ì§€ ì¸ë²¤í† ë¦¬ ì•„ì´í…œ
- ìŒì„± ì±„ë„ ì—°ë™ ì§€ì›

---

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

![Architecture](architecture.png)

---

## ğŸ—„ï¸ ERD

![ERD](ERD.png)

---

## ğŸ”„ ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨

![Sequence Diagram](sequence-diagram2.png)

---

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

| êµ¬ë¶„ | ê¸°ìˆ  |
|------|------|
| **Android Client** | Kotlin, Jetpack Compose, Material3, Navigation Compose |
| | Retrofit2, OkHttp, Kakao Maps SDK, Google Play Services Location |
| **Backend** | Java 21, Spring Boot 4.0.1, Gradle 8.5 |
| **Database** | PostgreSQL 17 + PostGIS 3.5 (ê³µê°„ ë°ì´í„°), Redis 7 |
| **ì¸ì¦** | JWT, Kakao OAuth2, Naver OAuth2 |
| **ì¸í”„ë¼** | Docker, Docker Compose, Linux Ubuntu (Host Network Mode) |
| **CI/CD** | Jenkins íŒŒì´í”„ë¼ì¸ + Mattermost ë¹Œë“œ ì•Œë¦¼ |
| **ë„¤íŠ¸ì›Œí¬** | Nginx Proxy Manager (ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ), Cloudflare (DNS / SSLÂ·TLS) |

---

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
modaba/
â”œâ”€â”€ ERD.png                         # ERD ë‹¤ì´ì–´ê·¸ë¨
â”œâ”€â”€ architecture.png                # ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ë„ì‹
â”œâ”€â”€ sequence-diagram2.png           # ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨
â”œâ”€â”€ app_logo.png                    # ì•± ë¡œê³ 
â””â”€â”€ modaba_source_code/
    â”œâ”€â”€ Dockerfile                  # ë°±ì—”ë“œ Docker ì´ë¯¸ì§€ (Java 21 ë©€í‹°ìŠ¤í…Œì´ì§€)
    â”œâ”€â”€ docker-compose.yml          # í”„ë¡œë•ì…˜ Docker Compose
    â”œâ”€â”€ docker-compose-local.yml    # ë¡œì»¬ ê°œë°œìš© Docker Compose
    â”œâ”€â”€ schema.sql                  # DB ìŠ¤í‚¤ë§ˆ ì´ˆê¸°í™”
    â”œâ”€â”€ data.sql                    # ì´ˆê¸° ë°ì´í„° ì‚½ì…
    â”œâ”€â”€ init_regions.py             # í–‰ì •êµ¬ì—­ ë°ì´í„° ì´ˆê¸°í™” ìŠ¤í¬ë¦½íŠ¸
    â”œâ”€â”€ client/
    â”‚   â””â”€â”€ android/                # Android í´ë¼ì´ì–¸íŠ¸ (Kotlin + Jetpack Compose)
    â”‚       â””â”€â”€ app/src/            # ì•± ì†ŒìŠ¤ ì½”ë“œ
    â””â”€â”€ server/                     # Spring Boot ë°±ì—”ë“œ
        â””â”€â”€ src/                    # ì„œë²„ ì†ŒìŠ¤ ì½”ë“œ
```

---

## ğŸš€ ì‹œì‘í•˜ê¸°

### ì‚¬ì „ ì¤€ë¹„

- Docker & Docker Compose ì„¤ì¹˜
- Python 3 (ì§€ì—­ ë°ì´í„° ì´ˆê¸°í™” ì‹œ)
- Android Studio (í´ë¼ì´ì–¸íŠ¸ ë¹Œë“œ ì‹œ)
- Kakao / Naver ê°œë°œì ì•± í‚¤ ë°œê¸‰
- Linux Ubuntu ì„œë²„ í™˜ê²½ (host ë„¤íŠ¸ì›Œí¬ ëª¨ë“œ ì‚¬ìš©)

### 1. ë¹Œë“œ í™˜ê²½

| êµ¬ë¶„ | ìƒì„¸ |
|------|------|
| **OS (Server)** | Linux Ubuntu (Host Network Mode) |
| **OS (Mobile)** | Android 11 ì´ìƒ |
| **Build SDK** | Gradle 8.5 / JDK 21 (Alpine ê¸°ë°˜) |
| **Runtime JRE** | Eclipse Temurin 21 (JRE Alpine ê¸°ë°˜) |
| **Framework** | Spring Boot 4.0.1, Android Studio |
| **Database** | PostGIS 17 (Docker), Redis 7 (Docker) |

> âš ï¸ **í¬íŠ¸ ì£¼ì˜ì‚¬í•­**: `network_mode: host` ì„¤ì •ìœ¼ë¡œ ë™ì‘í•˜ë¯€ë¡œ, í˜¸ìŠ¤íŠ¸ OSì˜  
> **5432**(PostgreSQL), **6379**(Redis), **8080**(Backend) í¬íŠ¸ ì ìœ  ì—¬ë¶€ë¥¼ ë°˜ë“œì‹œ í™•ì¸í•˜ì„¸ìš”.

### 2. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

`modaba_source_code/` ë””ë ‰í† ë¦¬ì— `.env` íŒŒì¼ì„ ìƒì„±í•©ë‹ˆë‹¤. (ì‹¤ì œ ì‹œí¬ë¦¿ê°’ì€ `exec/.env` íŒŒì¼ ì°¸ì¡°)

```env
# Server Config
SERVER_PORT=8080
TIMEZONE=Asia/Seoul

# Security
JWT_SECRET=your_jwt_secret

# PostgreSQL
POSTGRES_DB=your_db_name
POSTGRES_USER=your_db_user
POSTGRES_PASSWORD=your_db_password

# Kakao OAuth
KAKAO_REST_API_KEY=your_kakao_rest_api_key
KAKAO_CLIENT_SECRET=your_kakao_client_secret
KAKAO_REDIRECT_URL=your_kakao_redirect_url

# Naver OAuth
NAVER_CLIENT_ID=your_naver_client_id
NAVER_CLIENT_SECRET=your_naver_client_secret
NAVER_REDIRECT_URL=your_naver_redirect_url

# Google
GOOGLE_APPLICATION_PASSWORD=your_google_app_password
```

### 3. ë°±ì—”ë“œ ë¹Œë“œ ë° ë°°í¬

```bash
cd modaba_source_code
docker-compose up -d --build
```

**Docker ë©€í‹°ìŠ¤í…Œì´ì§€ ë¹Œë“œ í”„ë¡œì„¸ìŠ¤**

1. **Build Stage**: `gradle:8.5-jdk21-alpine` í™˜ê²½ì—ì„œ `clean bootJar` ìˆ˜í–‰
2. **Runtime Stage**: `eclipse-temurin:21-jre-alpine` í™˜ê²½ìœ¼ë¡œ ë¹Œë“œëœ `app.jar`ë§Œ ë³µì‚¬í•˜ì—¬ ê²½ëŸ‰í™”ëœ ì»¨í…Œì´ë„ˆ ì‹¤í–‰

> ë¡œì»ˆ ê°œë°œ í™˜ê²½ì—ì„œëŠ” `docker-compose -f docker-compose-local.yml up -d --build` ì‚¬ìš©

### 4. DB ì´ˆê¸°í™”

Docker ì»¨í…Œì´ë„ˆ **ìµœì´ˆ ì‹¤í–‰ ì‹œ** ì•„ë˜ ìŠ¤í¬ë¦½íŠ¸ê°€ ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰ë˜ì–´ DB ìŠ¤í‚¤ë§ˆì™€ ê¸°ì´ˆ ë°ì´í„°ë¥¼ êµ¬ì„±í•©ë‹ˆë‹¤.

```
schema.sql  â†’  /docker-entrypoint-initdb.d/01-initSchema.sql
data.sql    â†’  /docker-entrypoint-initdb.d/02-initData.sql
```

í–‰ì •êµ¬ì—­ ë°ì´í„°ëŠ” ë³„ë„ ìŠ¤í¬ë¦½íŠ¸ë¡œ ì´ˆê¸°í™”í•©ë‹ˆë‹¤:

```bash
cd modaba_source_code
python3 init_regions.py
```

### 5. Android í´ë¼ì´ì–¸íŠ¸ ë¹Œë“œ

1. Android Studioì—ì„œ `modaba_source_code/client/android` ê²½ë¡œë¥¼ í”„ë¡œì íŠ¸ë¡œ ì—´ê¸°
2. `local.properties`ì— ì„œë²„ ì£¼ì†Œ ë° Kakao Maps Native App Key ì¶”ê°€
3. ë””ë°”ì´ìŠ¤ ë˜ëŠ” ì—ë®¬ë ˆì´í„°ì—ì„œ ì‹¤í–‰ (**minSdk 26 / Android 8.0** ì´ìƒ)

---

## ğŸ”— ì™¸ë¶€ ì„œë¹„ìŠ¤ ì—°ë™

| ì„œë¹„ìŠ¤ | ì„¤ëª… |
|--------|------|
| **Kakao OAuth 2.0** | ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ (Callback URL ì„¤ì • í•„ìš”) |
| **Naver OAuth 2.0** | ë„¤ì´ë²„ ë¡œê·¸ì¸ (Callback URL ì„¤ì • í•„ìš”) |
| **Jenkins** | CI/CD íŒŒì´í”„ë¼ì¸ ìë™í™” |
| **Mattermost** | Jenkins ë¹Œë“œ ì„±ê³µ/ì‹¤íŒ¨ ì•Œë¦¼ |
| **Cloudflare** | DNS ê´€ë¦¬ ë° SSL/TLS ì•”í˜¸í™” |
| **Nginx Proxy Manager** | ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ ë° í˜¸ìŠ¤íŠ¸ í¬íŠ¸ ë¼ìš°íŒ… |

---

## ğŸ—ƒï¸ ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì„±

| í…Œì´ë¸” | ì„¤ëª… |
|--------|------|
| `users` | ì‚¬ìš©ì ê³„ì • (ì†Œì…œ ë¡œê·¸ì¸, MMR, ì—­í• ) |
| `rooms` | ê²Œì„ ë°© (ê²½ë„/ì•½ì†/ì§‘ì¤‘ íƒ€ì…, ê³µê°„ ê²½ê³„ Geometry) |
| `room_participants` | ë°© ì°¸ê°€ì (ì—­í• , ìƒíƒœ, ìœ„ì¹˜ ê³µìœ  ì—¬ë¶€) |
| `game_sessions` | ê²Œì„ ì„¸ì…˜ (ìŠ¹ë¦¬ íŒ€, ì‹œì‘/ì¢…ë£Œ ì‹œê°„) |
| `action_logs` | ê²½ë„ ê²Œì„ ì•¡ì…˜ ê¸°ë¡ (ì²´í¬/íƒˆì¶œ/íƒœê·¸) |
| `user_game_activities` | ì´ë™ ê¶¤ì , ê±°ë¦¬, ì†ë„, AI ë¦¬í¬íŠ¸ |
| `focus_records` | ì§‘ì¤‘ ì ìˆ˜ ê¸°ë¡ |
| `friendships` | ì¹œêµ¬ ê´€ê³„ (PENDING / ACCEPTED / REJECTED) |
| `mmr_history` | MMR ë³€ë™ ì´ë ¥ |
| `user_inventory` | ìºë¦­í„° & ë°°ì§€ ë³´ìœ  ëª©ë¡ |
| `chat_logs` | ë°© ë‚´ ì±„íŒ… ë©”ì‹œì§€ |
| `regions` | í–‰ì •êµ¬ì—­ ë§ˆìŠ¤í„° ë°ì´í„° |

---

<div align="center">
  <sub>âš¡ SSAFY 12ê¸° ê³µí†µ í”„ë¡œì íŠ¸ | ì‚¼ì„± ì²­ë…„ SW ì•„ì¹´ë°ë¯¸</sub>
</div>
