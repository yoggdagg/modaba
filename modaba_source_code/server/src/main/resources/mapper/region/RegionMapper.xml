<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ssafy.s14p11c204.server.domain.region.mapper.RegionMapper">

    <!-- 1단계: 시/도 목록 조회 (중복 제거) -->
    <select id="findAllCities" resultType="string">
        SELECT DISTINCT city
        FROM regions
        ORDER BY city
    </select>

    <!-- 2단계: 시/군/구 목록 조회 (중복 제거) -->
    <select id="findDistrictsByCity" resultType="string">
        SELECT DISTINCT district
        FROM regions
        WHERE city = #{city}
        ORDER BY district
    </select>

    <!-- 3단계: 읍/면/동 목록 조회 -->
    <select id="findNeighborhoods" resultType="com.ssafy.s14p11c204.server.domain.region.dto.RegionNeighborhoodDto">
        SELECT
            region_id as regionId,
            neighborhood as name,
            center_lat as lat,
            center_lng as lng
        FROM regions
        WHERE city = #{city} AND district = #{district}
        ORDER BY neighborhood
    </select>

</mapper>
